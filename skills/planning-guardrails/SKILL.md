---
name: planning-guardrails
description: Plan modeや計画作成・プラン作成の依頼時に必ず発動し、必須セクションを漏れなく含む計画を作るためのガードレールを提供します。参考情報（URL/過去PR/ファイルパス）とユーザー発言（要約＋生ログ）を必須化し、テストがある場合はTDD前提と正常系/異常系テストケース記載を強制します。
---

# Planning Guardrails

## 目的

Plan modeでの計画作成において、情報の抜けや意図のねじ曲げを防ぎ、レビューで検証しやすいプランを作ること。

## 使用タイミング

Plan modeで計画を作る時は**必ず**このスキルを使用する。

## 必須チェックリスト

- 参考情報（ユーザー提供URL/過去PR/ファイルパス＋短い注釈）
- ユーザー発言（要約）
- ユーザー発言（生ログ、意味は変えず最小整形のみ）
- 目的・成功条件
- スコープ（in/out）
- 実装方針（主要アプローチ）
- 実行計画（テストがある場合はTDD前提を明記）
- 公開API/インターフェース変更
- テスト/検証（正常系/異常系のテストケースを必ず記載）
- リスク・前提

## 生ログの整形ルール

- 言い換え・要約・意味変更は禁止
- 句読点の追加と改行のみ許可

## テンプレート

詳細テンプレートと例は `references/plan-template.md` を参照する。

## 最小例

- 参考情報: なし
- ユーザー発言（要約）: 「Plan作成を手伝ってほしい」
- ユーザー発言（生ログ）: 「プラン つくって ほしいんだけど」
- 目的・成功条件: 目的は作業計画の明確化、成功条件は必須項目が全て埋まること
- スコープ: in=計画作成, out=実装
- 実装方針: テンプレートに従って作成
- 実行計画: テストがある場合はTDDで進める
- 公開API/インターフェース変更: なし
- テスト/検証: 正常系=必須項目が埋まる, 異常系=必須項目が欠ける
- リスク・前提: ユーザー提供情報が不足する可能性
